var Wt=Object.defineProperty;var Xe=Object.getOwnPropertySymbols;var Pt=Object.prototype.hasOwnProperty,Ut=Object.prototype.propertyIsEnumerable;var et=(w,A,I)=>A in w?Wt(w,A,{enumerable:!0,configurable:!0,writable:!0,value:I}):w[A]=I,R=(w,A)=>{for(var I in A||(A={}))Pt.call(A,I)&&et(w,I,A[I]);if(Xe)for(var I of Xe(A))Ut.call(A,I)&&et(w,I,A[I]);return w};(function(w,A){typeof exports=="object"&&typeof module!="undefined"?A(exports):typeof define=="function"&&define.amd?define(["exports"],A):(w=typeof globalThis!="undefined"?globalThis:w||self,A(w.trivule={}))})(this,function(w){var Pe,Ue,qe,ze,Ge,Ye,Ze;"use strict";var A=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function I(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Ae={exports:{}};(function(s,e){(function(t,i){s.exports=i()})(A,function(){var t=1e3,i=6e4,r=36e5,l="millisecond",o="second",y="minute",_="hour",m="day",E="week",v="month",D="quarter",P="year",K="date",Je="Invalid Date",Dt=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,Vt=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,jt={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(f){var u=["th","st","nd","rd"],a=f%100;return"["+f+(u[(a-20)%10]||u[a]||u[0])+"]"}},$e=function(f,u,a){var h=String(f);return!h||h.length>=u?f:""+Array(u+1-h.length).join(a)+f},Ht={s:$e,z:function(f){var u=-f.utcOffset(),a=Math.abs(u),h=Math.floor(a/60),n=a%60;return(u<=0?"+":"-")+$e(h,2,"0")+":"+$e(n,2,"0")},m:function f(u,a){if(u.date()<a.date())return-f(a,u);var h=12*(a.year()-u.year())+(a.month()-u.month()),n=u.clone().add(h,v),c=a-n<0,d=u.clone().add(h+(c?-1:1),v);return+(-(h+(a-n)/(c?n-d:d-n))||0)},a:function(f){return f<0?Math.ceil(f)||0:Math.floor(f)},p:function(f){return{M:v,y:P,w:E,d:m,D:K,h:_,m:y,s:o,ms:l,Q:D}[f]||String(f||"").toLowerCase().replace(/s$/,"")},u:function(f){return f===void 0}},te="en",q={};q[te]=jt;var Ke="$isDayjsObject",Ce=function(f){return f instanceof he||!(!f||!f[Ke])},oe=function f(u,a,h){var n;if(!u)return te;if(typeof u=="string"){var c=u.toLowerCase();q[c]&&(n=c),a&&(q[c]=a,n=c);var d=u.split("-");if(!n&&d.length>1)return f(d[0])}else{var b=u.name;q[b]=u,n=b}return!h&&n&&(te=n),n||!h&&te},M=function(f,u){if(Ce(f))return f.clone();var a=typeof u=="object"?u:{};return a.date=f,a.args=arguments,new he(a)},g=Ht;g.l=oe,g.i=Ce,g.w=function(f,u){return M(f,{locale:u.$L,utc:u.$u,x:u.$x,$offset:u.$offset})};var he=function(){function f(a){this.$L=oe(a.locale,null,!0),this.parse(a),this.$x=this.$x||a.x||{},this[Ke]=!0}var u=f.prototype;return u.parse=function(a){this.$d=function(h){var n=h.date,c=h.utc;if(n===null)return new Date(NaN);if(g.u(n))return new Date;if(n instanceof Date)return new Date(n);if(typeof n=="string"&&!/Z$/i.test(n)){var d=n.match(Dt);if(d){var b=d[2]-1||0,T=(d[7]||"0").substring(0,3);return c?new Date(Date.UTC(d[1],b,d[3]||1,d[4]||0,d[5]||0,d[6]||0,T)):new Date(d[1],b,d[3]||1,d[4]||0,d[5]||0,d[6]||0,T)}}return new Date(n)}(a),this.init()},u.init=function(){var a=this.$d;this.$y=a.getFullYear(),this.$M=a.getMonth(),this.$D=a.getDate(),this.$W=a.getDay(),this.$H=a.getHours(),this.$m=a.getMinutes(),this.$s=a.getSeconds(),this.$ms=a.getMilliseconds()},u.$utils=function(){return g},u.isValid=function(){return this.$d.toString()!==Je},u.isSame=function(a,h){var n=M(a);return this.startOf(h)<=n&&n<=this.endOf(h)},u.isAfter=function(a,h){return M(a)<this.startOf(h)},u.isBefore=function(a,h){return this.endOf(h)<M(a)},u.$g=function(a,h,n){return g.u(a)?this[h]:this.set(n,a)},u.unix=function(){return Math.floor(this.valueOf()/1e3)},u.valueOf=function(){return this.$d.getTime()},u.startOf=function(a,h){var n=this,c=!!g.u(h)||h,d=g.p(a),b=function(G,k){var U=g.w(n.$u?Date.UTC(n.$y,k,G):new Date(n.$y,k,G),n);return c?U:U.endOf(m)},T=function(G,k){return g.w(n.toDate()[G].apply(n.toDate("s"),(c?[0,0,0,0]:[23,59,59,999]).slice(k)),n)},$=this.$W,N=this.$M,F=this.$D,Q="set"+(this.$u?"UTC":"");switch(d){case P:return c?b(1,0):b(31,11);case v:return c?b(1,N):b(0,N+1);case E:var z=this.$locale().weekStart||0,se=($<z?$+7:$)-z;return b(c?F-se:F+(6-se),N);case m:case K:return T(Q+"Hours",0);case _:return T(Q+"Minutes",1);case y:return T(Q+"Seconds",2);case o:return T(Q+"Milliseconds",3);default:return this.clone()}},u.endOf=function(a){return this.startOf(a,!1)},u.$set=function(a,h){var n,c=g.p(a),d="set"+(this.$u?"UTC":""),b=(n={},n[m]=d+"Date",n[K]=d+"Date",n[v]=d+"Month",n[P]=d+"FullYear",n[_]=d+"Hours",n[y]=d+"Minutes",n[o]=d+"Seconds",n[l]=d+"Milliseconds",n)[c],T=c===m?this.$D+(h-this.$W):h;if(c===v||c===P){var $=this.clone().set(K,1);$.$d[b](T),$.init(),this.$d=$.set(K,Math.min(this.$D,$.daysInMonth())).$d}else b&&this.$d[b](T);return this.init(),this},u.set=function(a,h){return this.clone().$set(a,h)},u.get=function(a){return this[g.p(a)]()},u.add=function(a,h){var n,c=this;a=Number(a);var d=g.p(h),b=function(N){var F=M(c);return g.w(F.date(F.date()+Math.round(N*a)),c)};if(d===v)return this.set(v,this.$M+a);if(d===P)return this.set(P,this.$y+a);if(d===m)return b(1);if(d===E)return b(7);var T=(n={},n[y]=i,n[_]=r,n[o]=t,n)[d]||1,$=this.$d.getTime()+a*T;return g.w($,this)},u.subtract=function(a,h){return this.add(-1*a,h)},u.format=function(a){var h=this,n=this.$locale();if(!this.isValid())return n.invalidDate||Je;var c=a||"YYYY-MM-DDTHH:mm:ssZ",d=g.z(this),b=this.$H,T=this.$m,$=this.$M,N=n.weekdays,F=n.months,Q=n.meridiem,z=function(k,U,ie,fe){return k&&(k[U]||k(h,c))||ie[U].slice(0,fe)},se=function(k){return g.s(b%12||12,k,"0")},G=Q||function(k,U,ie){var fe=k<12?"AM":"PM";return ie?fe.toLowerCase():fe};return c.replace(Vt,function(k,U){return U||function(ie){switch(ie){case"YY":return String(h.$y).slice(-2);case"YYYY":return g.s(h.$y,4,"0");case"M":return $+1;case"MM":return g.s($+1,2,"0");case"MMM":return z(n.monthsShort,$,F,3);case"MMMM":return z(F,$);case"D":return h.$D;case"DD":return g.s(h.$D,2,"0");case"d":return String(h.$W);case"dd":return z(n.weekdaysMin,h.$W,N,2);case"ddd":return z(n.weekdaysShort,h.$W,N,3);case"dddd":return N[h.$W];case"H":return String(b);case"HH":return g.s(b,2,"0");case"h":return se(1);case"hh":return se(2);case"a":return G(b,T,!0);case"A":return G(b,T,!1);case"m":return String(T);case"mm":return g.s(T,2,"0");case"s":return String(h.$s);case"ss":return g.s(h.$s,2,"0");case"SSS":return g.s(h.$ms,3,"0");case"Z":return d}return null}(k)||d.replace(":","")})},u.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},u.diff=function(a,h,n){var c,d=this,b=g.p(h),T=M(a),$=(T.utcOffset()-this.utcOffset())*i,N=this-T,F=function(){return g.m(d,T)};switch(b){case P:c=F()/12;break;case v:c=F();break;case D:c=F()/3;break;case E:c=(N-$)/6048e5;break;case m:c=(N-$)/864e5;break;case _:c=N/r;break;case y:c=N/i;break;case o:c=N/t;break;default:c=N}return n?c:g.a(c)},u.daysInMonth=function(){return this.endOf(v).$D},u.$locale=function(){return q[this.$L]},u.locale=function(a,h){if(!a)return this.$L;var n=this.clone(),c=oe(a,h,!0);return c&&(n.$L=c),n},u.clone=function(){return g.w(this.$d,this)},u.toDate=function(){return new Date(this.valueOf())},u.toJSON=function(){return this.isValid()?this.toISOString():null},u.toISOString=function(){return this.$d.toISOString()},u.toString=function(){return this.$d.toUTCString()},f}(),Qe=he.prototype;return M.prototype=Qe,[["$ms",l],["$s",o],["$m",y],["$H",_],["$W",m],["$M",v],["$y",P],["$D",K]].forEach(function(f){Qe[f[1]]=function(u){return this.$g(u,f[0],f[1])}}),M.extend=function(f,u){return f.$i||(f(u,he,M),f.$i=!0),M},M.locale=oe,M.isDayjs=Ce,M.unix=function(f){return M(1e3*f)},M.en=q[te],M.Ls=q,M.p={},M})})(Ae);var tt=Ae.exports;const ce=I(tt);class de{constructor(e){this.argument=e,this._pipe="&pip;",this._space="&esp;"}replacePipes(){return this.argument.replace(new RegExp(this._pipe,"g"),"|")}replaceSpaces(){return this.argument.replace(new RegExp(this._space,"g")," ")}}const re=s=>({passes:!!s&&s!="",value:s}),st=s=>({passes:!0,value:s}),it=(s,e)=>(typeof e!="string"&&S("in"),e===""&&S("in"),{passes:L(e).includes(s),value:s}),rt=(s,e)=>{if(typeof e!="number"&&typeof e!="string"&&S("size"),V(s).passes){let t,i;try{[t,i]=Te(e)}catch(l){throw l}let r=St(s);return isNaN(r)&&(r=0),t=we(t,i),{passes:r<=t,value:s}}else return{passes:pe(s,e).passes,value:s,alias:"length"}},Ne=s=>typeof s=="boolean"?{passes:!0,value:!!s}:typeof s=="string"&&(s=s.toLowerCase(),s==="true"||s==="false"||s==="0"||s==="1"||s==="yes"||s==="no")?{passes:!0,value:s=="true"||s=="1"||s=="yes"}:{passes:!1,value:s},at=(s,e,t)=>{typeof e!="number"&&typeof e!="string"&&S("between");let[i,r]=L(e);return t==="file"?{passes:ke(s,e).passes,value:s,alias:"fileBetween"}:t=="date"||t=="date-local"?{passes:Ve(s,e).passes,value:s,alias:"dateBetween"}:t=="number"&&(i=Number(i),r=Number(r),s!==void 0&&s!==""&&p(i).passes&&p(r).passes)?p(s).passes?{passes:_e(s,r).passes&&ye(s,i).passes,value:Number(s),alias:"numberBetween"}:{passes:!1,value:s}:{passes:Se(s,e).passes,value:s,alias:"stringBetween"}},nt=(s,e)=>{if(!e||typeof e!="string")throw new Error("The regex rule argument must not be empty");const t=new de(e);return{passes:new RegExp(t.replacePipes()).test(s),value:s}},lt=(s,e)=>{let t=!1;return e==="string"?typeof s!="string"||s.length===0?t=!1:t=!/\d/.test(s):e==="digit"&&(t=p(s).passes),{passes:t,value:s}},ut=(s,e)=>{if(!p(e).passes)throw new Error("Digit rule parameter must be a number");let t=!1;if(p(s).passes){const i=String(s);t=/^\d+$/.test(i)&&i.length===Number(e)}return{passes:t,value:s}},ot=(s,e)=>{if(!p(e).passes)throw new Error("Max_digit rule parameter must be a number");let t=!1;if(p(s).passes){const i=String(s);t=/^\d+$/.test(i)&&i.length<=Number(e)}return{passes:t,value:s}},ht=(s,e)=>{if(!p(e).passes)throw new Error("Min_digit rule parameter must be a number");let t=!1;if(p(s).passes){const i=String(s);t=/^\d+$/.test(i)&&i.length>=Number(e)}return{passes:t,value:s}},ft=s=>{const e=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|.(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return typeof s!="string"?{passes:!1,value:s}:{passes:e.test(s),value:s}},me=(s,e)=>({passes:typeof s=="string"?s.length>=Number(e):!1,value:s}),ge=(s,e)=>({passes:typeof s=="string"?s.length<=Number(e):!0,value:s}),ae=s=>({passes:typeof s=="string",value:s}),ct=s=>{const e=/^(ftp|http|https):\/\/[^ "]+$/;return typeof s!="string"?{passes:!1,value:s}:{passes:e.test(s),value:s}},dt=s=>typeof s!="string"||s.length===0?{passes:!1,value:s}:{passes:/^[A-Z]/.test(s),value:s},mt=s=>typeof s!="string"||s.length===0||s.charAt(0)===" "?{passes:!1,value:s}:{passes:s[0]==s[0].toLocaleLowerCase(),value:s},gt=(s,e)=>{e||S("startWith");const t=L(e);return typeof s!="string"?{passes:!1,value:s}:{passes:t.some(i=>s.startsWith(i)),value:s}},pt=(s,e)=>{e||S("endWith");const t=L(e);return typeof s!="string"?{passes:!1,value:s}:{passes:t.some(i=>s.endsWith(i)),value:s}},vt=(s,e)=>{e||S("contains");const t=L(e);return typeof s!="string"?{passes:!1,value:s}:{passes:t.every(r=>s.includes(new de(r).replaceSpaces())),value:s}},pe=(s,e)=>{let t=[];if(!p(e).passes)throw new Error("The length rule argument must be an integer");if(e=parseInt(e),typeof s=="string"||typeof s=="number")t=s.toString().split("");else return{passes:!1,value:s};return{passes:t.length===e,value:s}},bt=s=>{if(typeof s!="string")return{passes:!1,value:s};const e=8,t=/[A-Z]/.test(s),i=/[a-z]/.test(s),r=/\d/.test(s),l=/[!@#$%^&*(),.?":{}|<>]/.test(s);return s.length<e||!t||!i||!r||!l?{passes:!1,value:s}:{passes:!0,value:s}},yt=s=>typeof s!="string"||s.length===0||s.charAt(0)===" "?{passes:!1,value:s}:{passes:!/^[0-9]/.test(s),value:s},_t=s=>typeof s!="string"||s.length===0?{passes:!1,value:s}:{passes:!/[0-9]$/.test(s),value:s},wt=s=>typeof s!="string"?{passes:!1,value:s}:{passes:!/^[0-9]$/.test(s),value:s},Tt=(s,e)=>{typeof e!="string"&&typeof e!="number"&&S("excludes");const t=L(e);return t.length||S("excludes"),typeof s!="string"?{passes:!0,value:s}:{passes:!t.some(i=>s.includes(new de(i).replaceSpaces())),value:s}},Et=s=>typeof s!="string"?{passes:!1,value:s}:{passes:s===s.toLocaleUpperCase(),value:s},Mt=s=>typeof s!="string"?{passes:!1,value:s}:{passes:s===s.toLocaleLowerCase(),value:s},Se=(s,e)=>{typeof e!="string"&&S("between");const[t,i]=L(e);return{passes:me(s,t).passes&&ge(s,i).passes,value:s}},V=s=>{const e=i=>i instanceof File||i instanceof Blob||i instanceof FileList;let t=!1;return Array.isArray(s)&&s.length&&s.every(i=>e(i))&&(t=!0),t=e(s)||t,{passes:t,value:s}},ve=(s,e)=>{const t=X(s);return t.length?{passes:t.every(r=>{if(V(r).passes){let l,o;try{[l,o]=Te(e)}catch(y){throw y}return r.size<=we(l,o)}else return!0}),value:t}:{value:s,passes:!1}},be=(s,e)=>{const t=X(s);return t.length?(typeof e!="number"&&typeof e!="string"&&S("minFileSize","The minimum size rule argument is required"),{passes:t.every(r=>{if(V(r).passes){let l,o;try{[l,o]=Te(e)}catch(y){throw y}return r.size>=we(l,o)}else return!1}),value:t}):{value:s,passes:!1}},ke=(s,e)=>{typeof e!="string"&&S("between");const[t,i]=L(e),r=X(s);return r.length?{passes:r.every(o=>ve(o,i).passes&&be(o,t).passes),value:s}:{value:s,passes:!1}},$t=(s,e)=>{typeof e!="string"&&S("mimes"),e===""&&S("mimes");const t=X(s);return t.length?{passes:t.every(r=>{var l;if(V(r).passes){const o=r;return((l=e.split(",").map(m=>m.trim()))!=null?l:[]).some(m=>{if(m=m.replace(/\s/g,""),m==="*"||o.name.endsWith(m)||m==""||o.type=="")return!0;if(m.endsWith("/*")){const E=m.slice(0,-2);return o.type.startsWith(E)}else if(m.startsWith("*.")){const E=m.substring(2);return o.name.endsWith(E)}else return o.type===m})}else return!1}),value:s}:{value:s,passes:!1}},ye=(s,e,t)=>{if(!p(e).passes)throw new Error("Min rule parameter must be an integer");return V(s).passes||t=="file"?{passes:be(s,e).passes,value:s}:(s==null&&(s=0),p(s).passes?{passes:Number(s)>=Number(e),value:Number(s)}:{passes:me(s,e).passes,value:s,alias:"minlength"})},_e=(s,e,t)=>{if(!p(e).passes)throw new Error("Min rule parameter must be an integer");return V(s).passes||t=="file"?{passes:ve(s,e).passes,value:s,alias:"maxFileSize"}:(s==null&&(s=0),p(s).passes?{passes:Number(s)<=Number(e),value:Number(s)}:{passes:ge(s,e).passes,value:s,alias:"maxlength"})},Le=s=>{const e=p(s);if(e.passes){const t=Number.isInteger(e.value);return{passes:t,value:t?parseInt(e.value):s,type:e.type}}return{passes:!1,value:s}},p=s=>s===""||s===null||s===void 0?{passes:!1,value:s}:s==="0"||s===0?{passes:!0,value:0,type:"number"}:s==="1"||s===1?{passes:!0,value:1,type:"number"}:{passes:!isNaN(Number(s))&&typeof s!="boolean"&&typeof s!="object",value:Number(s),type:"number"},Re=(s,e)=>{if(!p(e).passes)throw new Error("Modulo rule parameter must be an integer");return p(s).passes?{passes:Number(s)%Number(e)===0,value:Number(s)}:{passes:!1,value:s}},Ie=(s,e)=>{if(!p(e).passes)throw new Error("Lessthan rule parameter must be a number");return p(s).passes?{passes:Number(s)<Number(e),value:s}:{passes:!1,value:s}},Oe=(s,e)=>{if(!p(e).passes)throw new Error("Greaterthan rule parameter must be a number");return p(s).passes?{passes:Number(s)>Number(e),value:s}:{passes:!1,value:s}},Ct=(s,e)=>{if(!p(s).passes)return{passes:!1,value:s};const[t,i]=L(e),r=Number(s);return{passes:ye(s,t).passes&&_e(s,i).passes,value:r}};class At{constructor(e){this.form=e,this.formRules=[]}getInputByName(e){return this.form.querySelector(`[name=${e}]`)}getInpuTrValueByName(e){const t=this.getInputByName(e);return t?t.value:void 0}getFormRules(){return this.formRules}}class Nt extends At{constructor(e){super(e),this.register()}register(){this.formRules=[{ruleName:"same",call:this.same},{ruleName:"requiredIf",call:this.requiredIf},{ruleName:"requiredWhen",call:this.requiredWhen}]}same(e,t){return t?{passes:e===this.getInpuTrValueByName(t.toString()),value:e}:{passes:!1,value:e}}requiredIf(e,t){const[i,...r]=L(t!=null?t:"");if(i&&r.length>0){const l=this.getInpuTrValueByName(i.toString());return r.includes(l)?re(e):{passes:!0,value:e}}return{passes:!1,value:e}}requiredWhen(e,t){const[i,...r]=L(t!=null?t:"");return i&&r.length>0?r.some(o=>re(this.getInpuTrValueByName(o)).passes)?re(e):{passes:!0,value:e}:{passes:!1,value:e}}}const j=s=>{const e=/^(\w+):(.+)$/,t=s.match(e);if(t){const i=t[1],r=t[2];return{ruleName:i,params:r}}else{const[i,r]=s.split(":");return{ruleName:i,params:r}}},L=(s,e=",")=>typeof s!="string"?[]:s.split(e).map(t=>t.trim()),S=(s,e)=>{throw new Error(e!=null?e:`Please provide a valid <<${s}>> rule arguments`)};function Fe(){return new Date().toISOString()}function xe(s,e,t=null,i=!1){if(!s)return t;let r=s.getAttribute(`data-${e}`);if(r&&i)try{r=JSON.parse(r)}catch(l){return t}return r||ae(r)&&(r!=null&&r.length)?r:t}function x(s,e,t=null,i=!1){return xe(s,`tr-${e}`,t,i)}function St(s){const e=X(s);let t=0;if(!e.length)return t;for(const i of e)V(i).passes?t+=i.size:t+=0;return t}function X(s){return Array.isArray(s)?s:s instanceof FileList?Array.from(s):s instanceof File||s instanceof Blob?[s]:[]}function we(s,e){return e=e.toUpperCase(),s=Number(s),e=="KB"?s=s*1024:e=="MB"?s=s*1024*1024:e=="GB"&&(s=s*1024*1024*1024),s}function Te(s){const e=s.match(/^(\d+(\.\d+)?)\s*(B|KB|MB|GB)$/i);if(!e)throw new Error("Invalid size format. Please use valid format like '1KB', '1MB', etc.");const t=parseFloat(e[1]),i=e[3].toUpperCase();return[t,i]}function H(s,e){const t=e!=null?e:document;if(typeof s=="string")try{return t.querySelector(s)}catch(i){return s}return s instanceof HTMLElement?s:null}function ne(s,e){const t=[];if(Array.isArray(s))for(let i=0;i<s.length;i++){const r=s[i];t.push(e(r,i))}else for(const i in s)if(Object.prototype.hasOwnProperty.call(s,i)){const r=s[i];t.push(e(r,i))}return t}const Z=s=>{if(!s)return{passes:!1,value:s};const e=ce(new Date(s.toString()),void 0,!0);return e.isValid()?{passes:!0,value:e.toISOString(),type:"date"}:{passes:!1,value:s}},Be=(s,e)=>{if(e==="now"&&(e=Fe()),!Z(s).passes)return{passes:!1,value:s};if(!Z(e).passes)throw new Error("Pease provide a valid argument for dateBefore rule");return{passes:ce(s).isBefore(e),value:s}},De=(s,e)=>{if(e==="now"&&(e=Fe()),!Z(s).passes)return{passes:!1,value:s};if(!Z(e).passes)throw new Error("Pease provide a valid argument for dateAfter rule");return{passes:ce(s).isAfter(e),value:Z(s).value}},Ve=(s,e)=>{e||S("dateBetween");const[t,i]=L(e);return{passes:De(s,t).passes&&Be(s,i).passes,value:s}},kt=s=>{if(typeof s!="string")return{passes:!1,value:s};if(s.toString().split(":").length<3)for(;s.split(":").length<3;)s+=":00";return{passes:/^(0[0-9]|1[0-9]|2[0-3]):[0-5][0-9]:[0-5][0-9]$/.test(s),value:s}},Lt={default:"This field is invalid",required:"This field is required",email:"Please enter a valid email address",maxlength:"The maximum number of allowed characters is: :arg0",minlength:"The minimum number of allowed characters is: :arg0",min:"The :field field must be greater than or equal to ':arg0'",max:"The :field field must be less than or equal to ':arg0'",string:"Please enter a string of characters",between:"The value of this field must be between ':arg0' and ':arg1'",startWith:"The :field field must start with ':arg0'",endWith:"The :field field must end with ':arg0'",contains:"The :field field must contain the value ':arg0'",in:"Please choose a correct value for the :field field",integer:"The :field field must be an integer",int:"The :field field must be an integer",number:"This field must be a number",numeric:"This field must be a number",file:"This field must be a file",url:"This field must be a valid URL",length:"The length of this field must be :arg0",len:"The length of this field must be :arg0",maxFileSize:"The file size must be less than :arg0.",minFileSize:"The file size must be greater than :arg0.",size:"The size of this field must be less than or equal to :arg0",boolean:"This field must be a boolean (yes or no)",startWithUpper:"This field must start with an uppercase letter",startWithLower:"This field must start with a lowercase letter",nullable:"",password:"The password must be at least 8 characters long and include an uppercase letter, a lowercase letter, a digit, and a special character.",date:"This field must be a valid date",before:"The date must be before (:arg0)",after:"The date must be after (:arg0)",same:"This field must be identical to the value of the :arg0 field",requiredIf:"The :field field is required when the :arg0 field has the current value",requiredWhen:"The :field field is required when the :arg0 fields are present",phone:"This phone number seems to be invalid",time:"The :field field must be a valid time.",startWithString:"The :field field must start with a letter",endWithString:"The :field field must end with a letter",excludes:"The :field field must not contain :arg0.",hasLetter:"This field must contain at least one letter",regex:"This field is invalid.",lower:"This field must be lowercase",upper:"This field must be uppercase",fileBetween:"File size must be between :arg0 and :arg1",stringBetween:"The number of characters allowed must be between :arg0 and :arg1",modulo:"The value of :field field must be a multiple of :arg0",mod:"The value of :field field must be a multiple of :arg0",only:"The format of this field is not accepted, as it contains non-allowed characters",mimes:"This file format is not supported",digit:"This field must be a numeric value with exactly :arg0 digits",minDigit:"This field must be a numeric value with a minimum of :arg0 digits",maxDigit:"This field must be a numeric value with a maximum of :arg0 digits",lessThan:"This field must be a numeric value less than :arg0",lthan:"This field must be a numeric value less than :arg0",greaterThan:"This field must be a numeric value greater than :arg0",gthan:"This field must be a numeric value greater than :arg0",dateBetween:"The date must be between :arg0 and :arg1",numberBetween:"This field must be a numeric value between :arg0 and :arg1"},J=class C{static getMessages(e){e=e!=null?e:C.DEFAULT_LANG;let t=C._message[e];return t||(t=C._message[C.DEFAULT_LANG]),t}static getRuleMessage(e,t){var r;const i=C.getMessages(t);return(r=i[e])!=null?r:i.default}static addMessage(e,t,i){if(t){const r=C.getMessages(i);r[e]=t,C.putMessages(r,i)}}static putMessages(e,t){if(!e||Object.keys(e).length===0)throw new Error("The 'messages' argument must be a non-empty object");t=t||C.DEFAULT_LANG;const i=C._message[t]||{},r=R(R({},i),e);C._message[t]=r}static translate(e,t){if(typeof e!="string"||!e.length)throw new Error("The first argument must be a string with one or more characters");if(typeof t!="object"||t===void 0)throw new Error("The second argument must be a valid key/value pair object");C._message[e]=R(R({},C.getMessages(e)),t)}static rewrite(e,t,i){C.addMessage(t,i,e)}static rewriteMany(e,t,i){if(typeof e!="string"||!e.length)throw new Error("The 'lang' argument must be a string with one or more characters");if(!Array.isArray(t)||!Array.isArray(i))throw new Error("The 'rules' and 'messages' arguments must be arrays");if(t.length!==i.length)throw new Error("The 'rules' and 'messages' arrays must have the same length");for(let r=0;r<t.length;r++){const l=t[r],o=i[r];C.rewrite(e,l,o)}}static local(e){if(!ae(e)||!e.length)throw new Error("The language must be a valid string");C._useLang=e}static getLocal(){var e;return(e=C._useLang)!=null?e:C.LANG}};J._useLang=null,J.DEFAULT_LANG="en",J.LANG=J.DEFAULT_LANG,J._message={en:Lt};let O=J;class Rt{constructor(e,t,i=null){this._value=this._trim(e),this.code=t,this.attribute=i}validateTG(){return/^(\+228|00228)\d{8}$/.test(this._value)}validateNE(){return/^(\+227|00227)\d{8}$/.test(this._value)}validateGW(){return/^(\+245|00245)\d{7,8}$/.test(this._value)}validateTD(){return/^(\+235|00235)\d{8}$/.test(this._value)}validateCM(){return/^(\+237|00237)\d{8}$/.test(this._value)}validateBF(){return/^(\+226|00226)\d{8}$/.test(this._value)}validateAO(){return/^(\+244|00244)[9,2][1-9]\d{7}$/.test(this._value)}validateBJ(){return/^(\+229|00229)\d{8}$/.test(this._value)}validateUS(){return/^(\+1|001)[2-9]\d{9}$/.test(this._value)}validateFR(){return/^(\+33|0033|0)[1-9](\d{2}){4}$/.test(this._value)}validPhoneNumber(){if(!(ae(this._value)||p(this._value)))return!1;if(typeof this.code=="string"){const e=[],t=this.code.split(",").map(i=>i.trim().toUpperCase());for(const i of t){const r=`validate${i}`,l=this[r];if(typeof l=="function")e.push(l.call(this));else throw new Error(`Validator method '${r}' does not exist.`)}return e.some(i=>i)}return this._validGlobally()}_validGlobally(){return/^(\+|00|0)[0-9]{1,3}[0-9]{1,4}[0-9]{6,13}$/.test(this._value)}_trim(e){return e=typeof e!="string"?e:String(e),e.replace(/\s/g,"").replace(/-/g,"").replace(/\./g,"")}}const It=(s,e)=>typeof s!="string"?{passes:!1,value:s}:{passes:new Rt(s,e==null?void 0:e.toString()).validPhoneNumber(),value:s},je=class Y{static rule(e,t,i,r){Y.addRule(e,t),Y.addMessage(e,i,r)}static addRule(e,t){Y.rules[e]=t}static addMessage(e,t,i){O.addMessage(e,t,i)}static hasRule(e){return e in Y.rules}static getRule(e){return Y.rules[e]}static getMessage(e,t){return O.getRuleMessage(e,t)}static allRules(){return Y.rules}static allMessages(e){return O.getMessages(e)}};je.rules={required:re,email:ft,maxlength:ge,minlength:me,min:ye,max:_e,string:ae,between:at,startWith:gt,endWith:pt,contains:vt,in:it,integer:Le,int:Le,modulo:Re,number:p,numeric:p,url:ct,length:pe,len:pe,file:V,maxFileSize:ve,minFileSize:be,size:rt,boolean:Ne,startWithUpper:dt,nullable:st,startWithLower:mt,password:bt,date:Z,before:Be,after:De,phone:It,time:kt,startWithString:yt,endWithString:_t,excludes:Tt,hasLetter:wt,regex:nt,lower:Mt,upper:Et,stringBetween:Se,mod:Re,only:lt,mimes:$t,digit:ut,minDigit:ht,lessThan:Ie,lthan:Ie,maxDigit:ot,greaterThan:Oe,gthan:Oe,fileBetween:ke,dateBetween:Ve,numberBetween:Ct};let B=je;class W extends B{static add(e,t){W.addRule(e,t)}static has(e){return W.hasRule(e)}static all(){return W.allRules()}static get(e){return W.getRule(e)}}class Ee extends B{static get(e,t){return B.getMessage(e,t)}static all(e){return B.allMessages(e)}static add(e,t,i){B.addMessage(e,t,i)}}const Me={invalidClass:"is-invalid",validClass:"",local:{lang:O.DEFAULT_LANG},realTime:!0};class Ot{constructor(e,t,i){this.local=i,this.items=[],this.messages={},this.set(e,t,i)}remove(e){const{ruleName:t}=j(e);return this.items=this.items.filter(i=>i.name!==t),delete this.messages[t],this}get(e){var t;if(e){const{ruleName:i}=j(e);return(t=this.items.find(r=>r.name===i))!=null?t:null}return this.items}get length(){return this.items.length}atIndex(e){return this.items[e]}clear(){return this.items=[],this.messages={},this}ruleNameAsArray(){return this.items.map(e=>e.name)}messageAsArray(){return this.items.map(e=>e.message)}add(e,t,i,r,l){return this.has(e)&&this.remove(e),this.items.push(this.createRule(e,t,i,r,l)),this}has(e){const{ruleName:t}=j(e);return this.items.some(i=>i.name===t)}createRule(e,t,i,r,l){const{ruleName:o,params:y}=j(e);t||(t=Ee.get(o,l));const _=W.get(o);if(r=r!=null?r:_,!r)throw new Error(`The rule ${o} is not defined`);return this.messages[o]=t,{name:o,message:t,params:i!=null?i:y,validate:r}}toArrayOrObject(e){var t;return(t=Array.isArray(e)?e:typeof e=="string"?e.split("|").map(i=>i.trim()):e)!=null?t:[]}_sanitizeMessage(e){if(!e)return e;const t=/{(\d+(?:,\s*\d+)*)}/g;return e.replace(t,"")}convertAcoladeGroupToArray(e){var r;const t=/{(\d+(?:,\s*\d+)*)}/g;return(r=[...e.matchAll(t)].map(l=>l[1].split(",").map(o=>parseInt(o.trim())))[0])!=null?r:[]}set(e,t,i){var r,l;e=Array.isArray(e)?e.map(o=>o.trim()):e.split("|").map(o=>o.trim()),t=this.toArrayOrObject(t);for(let o=0;o<e.length;o++){const y=e[o];let _=null;const{ruleName:m,params:E}=j(y);if(Array.isArray(t)){const v=this.convertAcoladeGroupToArray((r=t[o])!=null?r:"");for(const D of v)t[D]=this._sanitizeMessage(t[o]);_=t[o]}else typeof t=="object"&&(_=(l=this._sanitizeMessage(t[m]))!=null?l:null);this.add(m,_,E,void 0,i)}return this}map(e){return this.items.map(e)}replace(e,t){const{ruleName:i}=j(e),r=this.items.findIndex(l=>l.name===i);return r!==-1&&(this.items[r]=this.createRule(t)),this}all(){return this.items}push(e,t,i,r,l){return this.add(e,t,i,r,l),this}getMessages(){return this.messages}append(e,t,i,r,l){return this.push(e,t,i,r,l),this}prepend(e,t,i,r,l){return this.items.unshift(this.createRule(e,t,i,r,l)),this}insertBefore(e,t){const i=this.items.findIndex(r=>r.name===e);if(i!==-1){if(typeof t=="string")return this.items.splice(i,0,this.createRule(t)),this;this.items.splice(i,0,this.createRule(t.rule,t.message,t.param,t.validate,t.local))}return this}insertAfter(e,t){const i=this.items.findIndex(r=>r.name===e);if(i!==-1){if(typeof t=="string")return this.items.splice(i+1,0,this.createRule(t)),this;this.items.splice(i+1,0,this.createRule(t.rule,t.message,t.param,t.validate,t.local))}return this}assignMessage(e,t){const{ruleName:i}=j(e);if(i){const r=this.get(i);r&&(this.messages[i]=t,r.message=t)}return this}getMessage(e){const{ruleName:t}=j(e);return this.messages[t]||null}}class He{constructor(){this.feedbackSelector="[data-tr-feedback={name}]",this.inputSelector="[name={name}]"}getFeedbackSelector(e){return typeof this.feedbackSelector=="string"?e.trim().length<1?null:this.feedbackSelector.replace("{name}",e):this.feedbackSelector}setFeedbackSelector(e){return e?(this.feedbackSelector=e,this):this}getInputSelector(e){return typeof this.inputSelector=="string"&&typeof e=="string"?e.trim().length<1?null:this.inputSelector.replace("{name}",e):this.inputSelector}}class Ft{constructor(e,t,i){this.__wasInit=!1,this._passed=!1,this.feedbackElement=null,this._errors=[],this.showMessage="first",this.showMessages=["first","full","last"],this.validClass="",this.invalidClass="is-invalid",this.param={emitEvent:!0,autoValidate:!0,failsOnfirst:!0,validClass:"",invalidClass:"is-invalid",type:"text",realTime:!0},this.autoValidate=!0,this._value=void 0,this._emitOnValidate=!0,this._type="text",this.realTime=!1,this._events=["change","blur","input"],this.validator=new xt,this.rules=new Ot([]),this.parameter=i!=null?i:new He,this._init(e,t)}setRules(e){return this.$rules.set(e),this}_setEvent(e){const t=x(this.inputElement,"events",void 0);t&&(e=t.split("|").length?t.split("|"):this.param.events),this.events=this.eventToArray(e!=null?e:this.param.events)}setInputElement(e){if(!(e instanceof Element)){const t=document.querySelector(e);t&&(e=t)}if(!(e instanceof Element))throw new Error(`The 'inputElement' parameter must be a valide 'ValidatableInput' type. "${e} provided"`);return this.inputElement=e,this.param.type=this.inputElement.type,this.inputElement.tagName.toLowerCase()==="textarea"&&(this.param.type="text"),this}get name(){var e,t;return(t=(e=this.inputElement.name)!=null?e:this.param.name)!=null?t:""}get value(){return this.getValue()}set value(e){this._value=e,this.autoValidate&&this.validate()}set errors(e){e&&(Array.isArray(e)||(e=Object.keys(e).map(t=>e[t])),this._errors=e!=null?e:[]),this.showErrorMessages()}setFeedbackElement(e){let t=null;if(e instanceof HTMLElement)t=e;else{let i=this.inputElement.parentElement;e=e!=null?e:this.param.feedbackElement,e=e!=null?e:this.parameter.getFeedbackSelector(this.name);do{if(t=e?H(e,i):t,t)break;i=(i==null?void 0:i.parentElement)||null}while(i&&!t)}return this.feedbackElement=t,this}showErrorMessages(){if(this.feedbackElement instanceof HTMLElement,this.feedbackElement instanceof HTMLElement){let e="";Array.isArray(this._errors)&&(e=this._errors[0],this.showMessage=="full"?e=this._errors.join("<br>"):this.showMessage=="last"&&this._errors.length>0&&(e=this._errors[this._errors.length-1])),this.feedbackElement.innerHTML=e!=null?e:""}}setShowMessage(){this.showMessage=x(this.inputElement,"show","first"),this.showMessage=this.showMessages.includes(this.showMessage)?this.showMessage:"first"}_setTrValidationClass(){var e,t;this.invalidClass=(e=this.param.invalidClass)!=null?e:this.invalidClass,this.validClass=(t=this.param.validClass)!=null?t:this.validClass,this.invalidClass=x(this.inputElement,"invalid-class",this.invalidClass),this.validClass=x(this.inputElement,"valid-class",this.validClass)}setralidationClass(){const e=this._passed,t=r=>{r.length>0&&this.inputElement.classList.remove(r)},i=r=>{r.length>0&&this.inputElement.classList.add(r)};e?(this.invalidClass.split(" ").forEach(t),this.validClass.split(" ").forEach(i),this.inputElement.setAttribute("data-tr-valid","1")):(this.validClass.split(" ").forEach(t),this.invalidClass.split(" ").forEach(i),this.inputElement.setAttribute("data-tr-valid","0"))}getName(){return this.name}getInputElemenyValue(){var e;return this.inputElement.type.toLowerCase()=="file"?(e=this.inputElement.files)!=null?e:null:this.inputElement.value}getValue(){return this.getInputElemenyValue()}setParams(e){typeof e=="object"&&typeof e!="undefined"&&(this.param=R(R({},this.param),e));const t=xe(this.inputElement,"tr",null,!0);return t&&(this.param=Object.assign(this.param,t)),this}setMessageAttributeName(e){return this.validator.attribute=e!=null?e:this.name,this}_init(e,t){var l,o,y,_;let i=e;typeof e=="object"&&e!==null&&e!==void 0&&(e instanceof HTMLElement||(t=e,t=e,i=t.selector)),i||(i=t==null?void 0:t.selector),this.setInputElement(i).setParams(t).setMessageAttributeName().setFeedbackElement(),this.setShowMessage(),this._setTrValidationClass(),this._setEvent((l=t==null?void 0:t.events)!=null?l:this._events);const r=x(this.inputElement,"rules",t==null?void 0:t.rules);if(r){const m=x(this.inputElement,"messages",this.param.messages);this.rules.set(r,m)}this.validator.rules=this.rules,this.validator.failsOnFirst=(o=t==null?void 0:t.failsOnfirst)!=null?o:!0,this._type=(y=t==null?void 0:t.type)!=null?y:"text",this.realTime=(_=t==null?void 0:t.realTime)!=null?_:this.realTime}getMessageAttributeName(){return this.validator.attribute}get messages(){return this.rules.getMessages()}get emitOnValidate(){return this._emitOnValidate}set emitOnValidate(e){this._emitOnValidate=e}set events(e){this._events=e}get events(){return this._events}commit(){this._type!=="file"&&(this.inputElement.value=this._value)}eventToArray(e){let t=[];if(typeof e!="string"){if(!Array.isArray(e))return[];t=e}return typeof e=="string"&&(t=e.split("|")),t.map(i=>i.trim())}get $rules(){return this.rules}}class le extends Ft{constructor(e,t,i){super(e,t,i),this.hooks={"before.init":[],"after.init":[],destroy:[]},this._validateCount=0,this._emitOnPasses=!0,this._emitOnFails=!0,this.init()}init(){this.__wasInit||(this.executeHooks("before.init"),this.autoValidate&&(this.__wasInit=!0,this.events.forEach(e=>{this.inputElement.addEventListener(e,()=>{this.realTime?(this.value=this.getInputElemenyValue(),this.emit("tr.input.update",{detail:{rules:this.rules,input:{},element:this.inputElement}})):e!="input"&&e!="keyup"&&e!="keydown"&&(this.value=this.getInputElemenyValue(),this.emit("tr.input.update",{detail:{rules:this.rules,input:{},element:this.inputElement}}))})})),this.executeHooks("after.init"))}rule(e,t,i){B.rule(e,t,i)}with(e){this.setParams(e)}whereName(e){return this.name===e}onFails(e){this.on("tr.input.fails",()=>{this.__call(e,this)})}onPasses(e){this.on("tr.input.passes",()=>{this.__call(e,this)})}onUpdate(e){this.on("tr.input.update",()=>{this.__call(e,this)})}destroy(){var e;(e=this.param.events)==null||e.forEach(t=>{this.inputElement.removeEventListener(t,()=>{this.validate()})}),this.param.events=[],this.rules.clear(),this.param.rules=[],this.executeHooks("destroy")}is(e){return e===this.inputElement}validate(){return this.valid(),this.setralidationClass(),this.errors=this.validator.getErrors(),this.emitOnValidate&&this.emitChangeEvent(),this._passed}getRules(){return this.rules.all()}hasRules(){return this.rules.length>0}getMessages(){return this.messages}valid(){return this.validator.value=this.value,this._validateCount++,this._passed=this.validator.passes()}emit(e,t){const i=new CustomEvent(e,{detail:t});this.inputElement.dispatchEvent(i)}on(e,t){this.inputElement.addEventListener(e,t)}emitChangeEvent(){this._passed?this._emitOnPasses&&(this.emit("tr.input.passes",{detail:{rules:this.rules,input:{},element:this.inputElement}}),this._emitOnPasses=!1,this._emitOnFails=!0):this._emitOnFails&&(this.emit("tr.input.fails",{detail:{rules:this.rules,input:{},element:this.inputElement}}),this._emitOnPasses=!0,this._emitOnFails=!1)}getErrors(){return this.validator.getErrors()}fails(){return!this.passes()}passes(){return this.valid()}__call(e,...t){typeof e=="function"&&e(...t)}getRuleExecuted(){return this.validator.getRuleExecuted()}filledErrors(e){this.errors=e!=null?e:this.validator.getErrors()}removeNativeAttribute(e){var t;return(t=this.inputElement)==null||t.removeAttribute(e),this}getNativeAttribute(e){var t;return(t=this.inputElement)==null?void 0:t.getAttribute(e)}hasNativeAttribute(e){var t,i;return(i=(t=this.inputElement)==null?void 0:t.hasAttribute(e))!=null?i:!1}setNativeAttribute(e,t){var i;return(i=this.inputElement)==null||i.setAttribute(e,t),this}removeRule(e){return this.rules.remove(e),this}removeRules(e){return Array.isArray(e)&&e.forEach(t=>this.removeRule(t)),this}replaceRule(e,t){return this.$rules.replace(e,t),this}setInvalidClass(e){return this.invalidClass=e,this}setValue(e){return this.value=e,this}setValidClass(e){return this.validClass=e,this}setAutoValidate(e){return this.autoValidate=e,this}setEventTriggers(e){return this.events=this.eventToArray(e),this}setType(e){return this._type=e,this}beforeRunRule(e,t){return this.addHook(`before.run.${e}`,t),this}afterRunRule(e,t){return this.addHook(`after.run.${e}`,t),this}beforeInit(e){return this.addHook("before.init",e),this}afterInit(e){return this.addHook("after.init",e),this}onRuleFail(e,t){return this.addHook(`after.fails.${e}`,t),this}onRulePass(e,t){return this.addHook(`after.passes.${e}`,t),this}triggerValidateEvent(e=!0){return this.emitOnValidate=e,this}failsOnfirst(e=!0){return this.validator.failsOnFirst=e,this}getFeedbackElement(){return this.feedbackElement}getRealTimeState(){return this.realTime}pushRule(e){return this.appendRule(e),this}hasRule(e){return this.rules.has(e)}appendRule(e){return this.rules.append(e.rule,e.message,e.param,e.validate,e.local),this}prependRule(e){return this.$rules.prepend(e.rule,e.message,e.param,e.validate,e.local),this}enableRealTime(){return this.realTime=!0,this}disableRealTime(){return this.realTime=!1,this.events=this._events,this}isRealTimeEnabled(){return this.realTime}addHook(e,t){this.hooks[e]||(this.hooks[e]=[]),this.hooks[e].push(t)}executeHooks(e){const t=this.hooks[e];t&&t.forEach(i=>i(this))}}class ue{constructor(e,t){this._eventCallbacks={},this._registerInputs={},this._lifeCycleCallbacks={},this.__calledCount=0,this._passed=!1,this._emitOnPasses=!0,this._emitOnFails=!0,this._trEnabledClass="etr-enabled",this._trDisabledClass="tr-disabled",this.container=null,this._trivuleInputs={},this.config={auto:!0,realTime:!0},this._onUpdateCallbacks=[],this._wasInit=!1,this._wasBound=!1,this.parameter=new He,typeof e=="string"||e instanceof HTMLElement?(this.bind(e),this.setConfig(t)):(t=t!=null?t:e,t!=null&&t.element&&this.bind(t.element),this.setConfig(t))}setSubmitButton(e){var i;let t=null;e&&(t=H(e)),!t&&this.container&&(t=(i=this.container)==null?void 0:i.querySelector("[data-tr-submit]")),t&&(this.submitButton=t)}init(){this._wasInit||(this._wasInit=!0,this.config.auto&&this.disableButton(),this.emit("tr.form.init",this),this._onSubmit(),this.onFails(()=>{this.disableButton()}),this.onPasses(()=>{this.enableButton()}))}disableButton(){if(this.submitButton&&(this.config.auto&&this.submitButton.setAttribute("disabled","true"),this._trDisabledClass)){const e=this._trEnabledClass.split(" ");for(const i of e)this.submitButton.classList.remove(i);this._trDisabledClass=x(this.submitButton,"disabled-class",this._trDisabledClass);const t=this._trDisabledClass.split(" ");for(const i of t)this.submitButton.classList.add(i)}}enableButton(){if(this.submitButton&&(this.submitButton.removeAttribute("disabled"),this._trEnabledClass)){const e=this._trDisabledClass.split(" ");for(const i of e)this.submitButton.classList.remove(i);this._trEnabledClass=x(this.submitButton,"enabled-class",this._trEnabledClass);const t=this._trEnabledClass.split(" ");for(const i of t)this.submitButton.classList.add(i)}}inputs(e=!0){return e?this.inputsToArray().map(this.getInputsMap):this.inputsToArray()}validated(e=!0){return e?this.inputsToArray().filter(t=>t.passes()).map(this.getInputsMap):this.inputsToArray().filter(t=>t.passes())}failed(e=!0){return e?this.inputsToArray().filter(t=>t.fails()).map(this.getInputsMap):this.inputsToArray().filter(t=>t.fails())}getInputsMap(e){return{name:e.getName(),value:e.getValue()}}isValid(){const e=[];return this.each(t=>{e.push(t.passes())}),e.every(t=>t)}passes(){return this.isValid()}_onSubmit(){const e=()=>{const t=[];return this.each(i=>{i.emitOnValidate=!1,t.push(i.validate())}),t.every(i=>i)?this._emitTrOnPassesEvent():this._emitTrOnFailsEvent(),this._passed};this.submitButton&&this.submitButton.addEventListener("click",()=>{e()}),this.on("submit",t=>{e()||t.preventDefault()})}rule(e,t,i){B.rule(e,t,i)}setConfig(e){var r;let t=x(document.querySelector("html"),"lang")||((r=document.querySelector("html"))==null?void 0:r.getAttribute("lang"));t=x(this.container,"lang",t);const i=x(this.container,"auto");if(i&&(this.config.auto=Ne(i).passes),e&&typeof e=="object"&&(this.config=R(R({},this.config),e),e.local)){const l=e.local;l.lang&&(t=l.lang)}O.LANG=t!=null?t:O.DEFAULT_LANG,this.parameter.setFeedbackSelector(this.config.feedbackSelector)}on(e,t){this.container?this.container.addEventListener(e,t):this._addEvents(e,t)}emit(e,t){var r;const i=new CustomEvent(e,{detail:t});(r=this.container)==null||r.dispatchEvent(i)}onFails(e){this.on("tr.form.fails",t=>{this.__call(e,t.detail)})}onPasses(e){this.on("tr.form.passes",t=>{this.__call(e,t.detail)})}onValidate(e){this.on("tr.form.validate",t=>{this.__call(e,t.detail)})}observeChanges(e){this.on("tr.form.updated",()=>{this.destroyInputs(),this._initTrivuleInputs(),this.__call(e,this)})}update(){this.emit("tr.form.updated",this)}_initTrivuleInputs(e){this.container&&(e=e||Array.from(this.container.querySelectorAll("[data-tr-rules]")),e.forEach(t=>this.add({selector:t})))}__call(e,...t){typeof e=="function"&&e(...t)}destroy(){this.container&&(this.container.removeEventListener("submit",this._onSubmit),this.destroyInputs(),this._trivuleInputs={},this.emit("tr.form.destroy"))}_emitTrOnFailsEvent(){this._emitOnFails&&(this.emit("tr.form.fails",this),this._emitOnFails=!1,this._emitOnPasses=!0)}_emitTrOnPassesEvent(){this._emitOnPasses&&(this.emit("tr.form.passes",this),this._emitOnPasses=!1,this._emitOnFails=!0)}with(e,t){const i=this.get(e);i&&(i.with(t),this._trivuleInputs[e]=i)}withMany(e){for(const[t,i]of Object.entries(e))this.with(t,i)}onInit(e){this.on("tr.form.init",t=>{t instanceof CustomEvent&&this.__call(e,t.detail)})}onUpdate(e){this._onUpdateCallbacks.push(e)}destroyInputs(){this.each(e=>{e.destroy()})}each(e){for(const t in this._trivuleInputs)Object.prototype.hasOwnProperty.call(this._trivuleInputs,t)&&e(this._trivuleInputs[t])}get(e){var t;return(t=this._trivuleInputs[e])!=null?t:null}inputsToArray(){return Object.keys(this._trivuleInputs).map(e=>this._trivuleInputs[e])}addTrivuleInput(e){if(!e.getFeedbackElement()){const r=this.parameter.getFeedbackSelector(e.getName());r&&e.setFeedbackElement(H(r,this.container))}const i=this._trivuleInputs[e.getName()];i&&i.destroy(),this._trivuleInputs[e.getName()]=e,e.onFails(()=>{this.valid=this.isValid()}),e.onPasses(()=>{this.valid=this.isValid()}),e.onUpdate(()=>{this._onUpdateCallbacks.forEach(r=>{this.__call(r,this)})}),this.valid=this.isValid()}make(e){if(typeof e!="object"||e===void 0||e===null)throw new Error("Invalid arguments passed to make method");return ne(e,this._bootInputs.bind(this)),this}set valid(e){this._passed!==e&&(this._passed=e,this.__calledCount++,this._passed?this._emitTrOnPassesEvent():this._emitTrOnFailsEvent()),this.emit("tr.form.validate",this)}get valid(){return this._passed}all(){return this.inputs()}getNativeElement(){return this.container}setAttrToNativeElement(e,t){var i;return(i=this.container)==null||i.setAttribute(e,t.toString()),this}setClassToNativeElement(e){var t;return(t=this.container)==null||t.classList.add(e),this}removeClassFromNativeElement(e){var t;return(t=this.container)==null||t.classList.remove(e),this}add(e){return this.make([e])}enableRealTime(){return this.config.realTime=!0,this.each(e=>(e.enableRealTime(),this)),this}disableRealTime(){return this.config.realTime=!1,this.each(e=>(e.disableRealTime(),this)),this}isRealTimeEnabled(){return this.config.realTime}setInputValidClass(e){this.config.validClass=e,this.each(t=>{t.setValidClass(e)})}setInputInvalidClass(e){this.config.invalidClass=e,this.each(t=>{t.setInvalidClass(e)})}bind(e){if(this._executeLifeCycleCallbacks("before.binding"),this._wasBound)return this;if(e){const t=H(e);t instanceof HTMLElement&&(this.container=t)}if(!(this.container instanceof HTMLElement)&&this.config.element){const t=H(this.config.element);t instanceof HTMLElement&&(this.container=t)}this.container instanceof HTMLElement&&(this._formValidator=new Nt(this.container),this._initTrivuleInputs(),this.init(),this._wasBound=!0,this._resolveInputValidation(),this._resolveEventListeners(),this._executeLifeCycleCallbacks("after.binding"))}bindElement(e){return this.bind(e)}_addEvents(e,t){this._eventCallbacks[e]?this._eventCallbacks[e].push(t):this._eventCallbacks[e]=[t]}_resolveEventListeners(){this.container instanceof HTMLElement&&ne(this._eventCallbacks,(e,t)=>{e.forEach(i=>{var r;(r=this.container)==null||r.addEventListener(t,i)})})}_resolveInputValidation(){ne(this._registerInputs,this._bootInputs.bind(this))}_bootInputs(e,t){var r,l,o,y,_,m;if(!this.container)return this._registerInputs[t]=e,this;let i=e.selector;if(e.selector&&(i=(r=H(e.selector,this.container))!=null?r:i),typeof i=="string"){const E=this.parameter.getInputSelector(i);i=H(E,this.container)}if(i)e.selector=void 0;else{const E=p(t).passes?void 0:t;if(E){const v=this.parameter.getInputSelector(E);i=(l=H(v,this.container))!=null?l:void 0}}return typeof e.realTime!="boolean"&&(e.realTime=this.config.realTime),e.validClass=(o=e.validClass)!=null?o:this.config.validClass,e.invalidClass=(y=e.invalidClass)!=null?y:this.config.invalidClass,e.autoValidate=(_=e.autoValidate)!=null?_:this.config.auto,e.feedbackElement=(m=e.feedbackElement)!=null?m:this.config.feedbackSelector,e.selector=i,this.addTrivuleInput(new le(i,e,this.parameter)),e}beforeBinding(e){return this._addLifeCycleCallback("before.binding",e),this}_addLifeCycleCallback(e,t){this._lifeCycleCallbacks[e]?this._lifeCycleCallbacks[e].push(t):this._lifeCycleCallbacks[e]=[t]}_executeLifeCycleCallbacks(e){const t=this._lifeCycleCallbacks[e];t&&ne(t,i=>{this.__call(i,this)})}afterBinding(e){return this._addLifeCycleCallback("after.binding",e),this}}class We{constructor(){this._trForms=[],this.config=Me}init(e){this.setConfig(e),document.querySelectorAll("form").forEach(t=>{const i=new ue(t,this.config);i.init(),this._trForms.push(i)})}rule(e,t,i){B.rule(e,t,i)}forms(){return this._trForms}setConfig(e){this.config=Me,e&&typeof e=="object"&&(this.config=R(R({},this.config),e))}static Rule(e,t,i){B.rule(e,t,i)}form(e,t){const i=new ue(e,t);return i.init(),i}input(e){return new le(e)}}class ee{constructor(e){this.messages=O.getMessages(e!=null?e:O.getLocal())}getRulesMessages(e){const t=[];for(const i of e)this.messages[i]?t.push(this.messages[i]):t.push("The input value is not valid");return t}static parseMessage(e,t,i,r){var o;const l=ee._createParamObject(L((o=r==null?void 0:r.toString())!=null?o:""));return l.field=e,i=ee._replace(i,l),i}setMessages(e){return this.messages=R(R({},this.messages),e),this}static _replace(e,t){for(const i in t)if(Object.prototype.hasOwnProperty.call(t,i)){const r=t[i];r&&(e=e.replace(`:${i}`,r.toString()))}return delete t.field,e.replace(/\.\.\.arg/,Object.values(t).join(", "))}static _createParamObject(e){const t={};for(let i=0;i<e.length;i++){const r=e[i],l=`arg${i}`;t[l]=r}return t}}class xt{constructor(){this._inputType="text",this._value=void 0,this._ruleExecuted=[],this._failOnfirst=!0,this._attr="",this._trmessages={}}validate(){var i,r;const e=this._rules.all();if(!Array.isArray(e))throw new Error("The rule provided must be an array of Rule");let t=this._inputType;for(const l of e){const o=l.name,y=l.params,_=l.validate,m=l.message;let E=o;const v=this._makeRuleExcutedInstance(E,o);if(v.params=y,!_||typeof _!="function")throw new Error(`The rule ${o} is not defined`);const D=_(this._value,y,t);if(v.passed=D.passes,this._value=D.value,t=(i=D.type)!=null?i:t,E=(r=D.alias)!=null?r:o,v.valueTested=this._value,v.run=!0,this._addRuleExecuted(v),this._failOnfirst){if(!v.passed){this._parseRuleMessage(v,E,m);break}}else v.passed?v.message=null:this._parseRuleMessage(v,E,m)}return!this.hasErrors()}getErrors(){var t;const e={};for(const i of this._ruleExecuted)i.passed||(e[i.orignalName]=(t=i.message)!=null?t:"");return e}hasErrors(){return this._ruleExecuted.some(e=>!e.passed)}passes(){return!this.hasErrors()}setRules(e){this._rules=e}getRules(){return this._rules}_makeRuleExcutedInstance(e,t){const i=this._ruleExecuted.find(r=>r.isNamed(e));return i!=null?i:new Bt(e,t)}_addRuleExecuted(e){this._ruleExecuted.includes(e)||this._ruleExecuted.push(e)}_parseRuleMessage(e,t,i){const r=O.getRuleMessage(e.orignalName);i&&i!==r?this._trmessages[e.ruleName]=i:this._trmessages[e.ruleName]=O.getRuleMessage(t!=null?t:e.ruleName);const l=new ee().setMessages(this._trmessages);return i=ee.parseMessage(this._attr,e.ruleName,l.getRulesMessages([e.ruleName])[0],e.params),e.message=i,e}set value(e){this._value=e,this.validate()}set failsOnFirst(e){this._failOnfirst=e}get value(){return this._value}set attribute(e){this._attr=e}get attribute(){return this._attr}set(e,t,i){this._failOnfirst=t,this._rules=e,this._inputType=i!=null?i:this._inputType}getRuleExecuted(){return this._ruleExecuted}set rules(e){this.setRules(e)}}class Bt{constructor(e,t){this.passed=!1,this.message=null,this.run=!1,this.ruleName=e,this.orignalName=t}wasRunWith(e){return this.valueTested===e&&this.run}isNamed(e){return this.ruleName===e}}typeof window!="undefined"&&(window.TrivuleInput=(Pe=window.TrivuleInput)!=null?Pe:le,window.TrivuleForm=(Ue=window.TrivuleForm)!=null?Ue:ue,window.Trivule=(qe=window.Trivule)!=null?qe:We,window.TrBag=(ze=window.TrBag)!=null?ze:B,window.TrLocal=(Ge=window.TrLocal)!=null?Ge:O,window.TrRule=(Ye=window.TrRule)!=null?Ye:W,window.TrMessage=(Ze=window.TrMessage)!=null?Ze:Ee),w.TrBag=B,w.TrConfig=Me,w.TrLocal=O,w.TrMessage=Ee,w.TrRule=W,w.Trivule=We,w.TrivuleForm=ue,w.TrivuleInput=le,Object.defineProperty(w,Symbol.toStringTag,{value:"Module"})});
